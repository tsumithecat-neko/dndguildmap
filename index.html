<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>费伦战报交互地图</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html, #map { margin: 0; height: 100%; background: #1a1a1a; }
        .leaflet-popup-content { color: #333; line-height: 1.6; }
        .log-link { display: block; margin-top: 5px; color: #7b2cbf; font-weight: bold; text-decoration: none; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 1. 初始化地图（简单坐标系）
        const map = L.map('map', { crs: L.CRS.Simple, minZoom: -1 });
        // 进阶技巧：点击地图获取精确坐标
        map.on('click', function(e) {
        // 获取点击位置的坐标
        const lat = e.latlng.lat.toFixed(2);
        const lng = e.latlng.lng.toFixed(2);
    
        // 1. 在浏览器控制台打印 (F12 查看)
        console.log(`当前点击坐标: [${lat}, ${lng}]`);
        
        // 2. 在地图上弹出气泡显示坐标，方便直接复制
        L.popup()
            .setLatLng(e.latlng)
            .setContent(`坐标位置: [${lat}, ${lng}]`)
            .openOn(map);
        });
        // 2. 设定图片尺寸 (假设你的图片是 3000x2000，请按比例修改)
        const bounds = [[0, 0], [3185, 4763]]; 
        const image = L.imageOverlay('费伦大陆地图.png', bounds).addTo(map);
        map.fitBounds(bounds);

        // 3. 战报数据点（这里手动添加，或者从 JSON 读取）
        const adventureLogs = [
            {
                pos: [2135.00, 1672.50] // 对应图片上的像素位置
                name: "据点 (Guild)",
                summary: "建立据点",
                url: "https://mydndguild.vercel.app/my-dnd-guild/1-build-our-guild/" // 对应 Digital Garden 发布的笔记路径
            }
            //{
            //     pos: [1000, 1500],
            //     name: "博德之门",
            //     summary: "发现潜伏的邪教徒...",
            //     url: "/baldur-gate-log"
            // }
        ];

        // 4. 批量生成图标
        adventureLogs.forEach(log => {
            const marker = L.marker(log.pos).addTo(map);
            marker.bindPopup(`
                <b>${log.name}</b><br>
                ${log.summary}<br>
                <a href="${log.url}" target="_parent" class="log-link">查看详细战报 →</a>
            `);
        });
    </script>
</body>

</html>


